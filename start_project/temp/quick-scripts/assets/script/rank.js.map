{"version":3,"sources":["rank.js"],"names":["com","require","cc","Class","extends","Component","properties","display","Sprite","start","_isShow","tex","Texture2D","onClick","wx","setUserCloudStorage","KVDataList","key","value","score","toString","success","console","log","postMessage","message","_updaetSubDomainCanvas","openDataContext","getOpenDataContext","sharedCanvas","canvas","initWithElement","handleLoadedTexture","spriteFrame","SpriteFrame","update"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAIA,MAAMC,QAAQ,QAAR,CAAV;AACAC,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,iBAASL,GAAGM;AADJ,KAHP;;AAOL;;AAEA;;AAEAC,SAXK,mBAWG;AACJ,aAAKC,OAAL,GAAe,KAAf;AACA,aAAKC,GAAL,GAAW,IAAIT,GAAGU,SAAP,EAAX;AACH,KAdI;AAgBLC,WAhBK,qBAgBK;;AAENC,WAAGC,mBAAH,CAAuB;AACnBC,wBAAY,CAAC,EAAEC,KAAK,OAAP,EAAgBC,OAAOlB,IAAImB,KAAJ,CAAUC,QAAV,EAAvB,EAAD,CADO;AAEnBC,qBAAS,mBAAY;AACjBC,wBAAQC,GAAR,CAAY,aAAZ;AACA,qBAAKb,OAAL,GAAe,CAAC,KAAKA,OAArB;AACA;AACAI,mBAAGU,WAAH,CAAe;AACXC,6BAAS,KAAKf,OAAL,GAAe,MAAf,GAAwB;AADtB,iBAAf;AAGH;AATkB,SAAvB;AAYH,KA9BI;AAgCLgB,0BAhCK,oCAgCoB;AACrB,YAAI,CAAC,KAAKf,GAAV,EAAe;AACX;AACH;AACD,YAAIgB,kBAAkBb,GAAGc,kBAAH,EAAtB;AACA,YAAIC,eAAeF,gBAAgBG,MAAnC;AACA,aAAKnB,GAAL,CAASoB,eAAT,CAAyBF,YAAzB;AACA,aAAKlB,GAAL,CAASqB,mBAAT;AACA,aAAKzB,OAAL,CAAa0B,WAAb,GAA2B,IAAI/B,GAAGgC,WAAP,CAAmB,KAAKvB,GAAxB,CAA3B;AACH,KAzCI;AA2CLwB,UA3CK,oBA2CI;AACL,aAAKT,sBAAL;AACH;AA7CI,CAAT","file":"rank.js","sourceRoot":"..\\..\\..\\..\\assets\\script","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\r\nvar com = require(\"Common\");\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        display: cc.Sprite\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    // onLoad () {},\r\n\r\n    start() {\r\n        this._isShow = false;\r\n        this.tex = new cc.Texture2D();\r\n    },\r\n\r\n    onClick() {\r\n\r\n        wx.setUserCloudStorage({\r\n            KVDataList: [{ key: \"score\", value: com.score.toString() }],\r\n            success: function () {\r\n                console.log(\"set success\");\r\n                this._isShow = !this._isShow;\r\n                // 发消息给子域\r\n                wx.postMessage({\r\n                    message: this._isShow ? 'Show' : 'Hide'\r\n                })\r\n            }\r\n        });\r\n\r\n    },\r\n\r\n    _updaetSubDomainCanvas() {\r\n        if (!this.tex) {\r\n            return;\r\n        }\r\n        var openDataContext = wx.getOpenDataContext();\r\n        var sharedCanvas = openDataContext.canvas;\r\n        this.tex.initWithElement(sharedCanvas);\r\n        this.tex.handleLoadedTexture();\r\n        this.display.spriteFrame = new cc.SpriteFrame(this.tex);\r\n    },\r\n\r\n    update() {\r\n        this._updaetSubDomainCanvas();\r\n    }\r\n\r\n});\r\n"]}