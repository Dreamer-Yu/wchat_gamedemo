{"version":3,"sources":["../../../../assets/script/assets/script/rank.js"],"names":["cc","Class","extends","Component","properties","display","Sprite","start","_isShow","tex","Texture2D","onClick","self","wx","setUserCloudStorage","KVDataList","key","value","success","console","log","postMessage","message","_updaetSubDomainCanvas","openDataContext","getOpenDataContext","sharedCanvas","canvas","initWithElement","handleLoadedTexture","spriteFrame","SpriteFrame","update"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,iBAAQL,GAAGM;AADH,KAHP;;AAOL;;AAEA;;AAEAC,SAXK,mBAWI;AACL,aAAKC,OAAL,GAAe,IAAf;AACA,aAAKC,GAAL,GAAW,IAAIT,GAAGU,SAAP,EAAX;AACH,KAdI;AAgBLC,WAhBK,qBAgBM;AACP,YAAIC,OAAO,IAAX;AACAC,WAAGC,mBAAH,CAAuB;AACnBC,wBAAW,CAAC,EAACC,KAAI,OAAL,EAAaC,OAAM,KAAnB,EAAD,CADQ;AAEnBC,qBAAQ,mBAAU;AACdC,wBAAQC,GAAR,CAAY,aAAZ;AACAR,qBAAKJ,OAAL,GAAe,CAACI,KAAKJ,OAArB;AACA;AACAK,mBAAGQ,WAAH,CAAe;AACXC,6BAASV,KAAKJ,OAAL,GAAe,MAAf,GAAwB;AADtB,iBAAf;AAGH;AATkB,SAAvB;AAYH,KA9BI;AAgCLe,0BAhCK,oCAgCqB;AACtB,YAAI,CAAC,KAAKd,GAAV,EAAe;AACX;AACH;AACD,YAAIe,kBAAkBX,GAAGY,kBAAH,EAAtB;AACA,YAAIC,eAAeF,gBAAgBG,MAAnC;AACA,aAAKlB,GAAL,CAASmB,eAAT,CAAyBF,YAAzB;AACA,aAAKjB,GAAL,CAASoB,mBAAT;AACA,aAAKxB,OAAL,CAAayB,WAAb,GAA2B,IAAI9B,GAAG+B,WAAP,CAAmB,KAAKtB,GAAxB,CAA3B;AACH,KAzCI;AA2CLuB,UA3CK,oBA2CK;AACN,aAAKT,sBAAL;AACH;AA7CI,CAAT","file":"rank.js","sourceRoot":"../../../../assets/script","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\n// Learn Attribute:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        display:cc.Sprite\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    // onLoad () {},\n\n    start () {\n        this._isShow = true;\n        this.tex = new cc.Texture2D();\n    },\n\n    onClick () {\n        let self = this;\n        wx.setUserCloudStorage({\n            KVDataList:[{key:\"score\",value:\"123\"}],\n            success:function(){\n                console.log(\"set success\");\n                self._isShow = !self._isShow;\n                // 发消息给子域\n                wx.postMessage({\n                    message: self._isShow ? 'Show' : 'Hide'\n                })\n            }\n        });\n        \n    },\n\n    _updaetSubDomainCanvas () {\n        if (!this.tex) {\n            return;\n        }\n        var openDataContext = wx.getOpenDataContext();\n        var sharedCanvas = openDataContext.canvas;\n        this.tex.initWithElement(sharedCanvas);\n        this.tex.handleLoadedTexture();\n        this.display.spriteFrame = new cc.SpriteFrame(this.tex);\n    },\n\n    update () {\n        this._updaetSubDomainCanvas();\n    }\n\n});\n"]}